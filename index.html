<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threads çˆ†æ¬¾ç”Ÿæˆå™¨ | Pro ç‰ˆ</title>
    <link rel="icon" href="favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fffef5;
            color: #452a00;
            scroll-behavior: smooth;
        }
        .threads-gradient {
            background: linear-gradient(to tr, #FCC800, #fbbf24, #f59e0b);
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Firebase é…ç½® ---
        const firebaseConfig = {
          apiKey: "AIzaSyAtuZO1BAEfNFjWrMskqPg3C9Ujef4mDVk",
          authDomain: "threads-maker-27625.firebaseapp.com",
          projectId: "threads-maker-27625",
        };

        // --- Google AI API Key (è«‹æ›¿æ›æˆä½ çš„) ---
        const GEMINI_API_KEY = "AIzaSyAtuZO1BAEfNFjWrMskqPg3C9Ujef4mDVk";

        // --- AI ç”Ÿæˆå‡½æ•¸ (ä½¿ç”¨ fetch ç›´æ¥èª¿ç”¨ API) ---
        const generateContent = async (input, mode, length) => {
          
          const lengthGuides = {
            short: "ç¸½å­—æ•¸ï¼š80-120å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + æ ¸å¿ƒè§€é»(1-2å¥) + ğŸ’¡é‡‘å¥ + 2å€‹Hashtagã€‚é¢¨æ ¼ï¼šåƒä¸€å‰‡æœ‰åŠ›çš„æ¨æ–‡ï¼Œä¸€é‡è¦‹è¡€ã€‚",
            medium: "ç¸½å­—æ•¸ï¼š200-300å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + ç—›é»(1æ®µ) + æ–¹æ¡ˆ(1æ®µ) + ğŸ’¡é‡‘å¥ + 3-4å€‹Hashtagã€‚é¢¨æ ¼ï¼šå®Œæ•´ä½†ä¸å›‰å—¦ï¼Œæ¯æ®µâ‰¤2è¡Œã€‚",
            long: "ç¸½å­—æ•¸ï¼š400-600å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + æ•…äº‹/æ¡ˆä¾‹(1-2æ®µ) + ç—›é»åˆ†æ(1æ®µ) + å…·é«”æ–¹æ¡ˆ(2-3é») + ğŸ’¡é‡‘å¥ + ç¸½çµ + 5å€‹Hashtagã€‚é¢¨æ ¼ï¼šåƒä¸€ç¯‡è¿·ä½ éƒ¨è½æ ¼ï¼Œæœ‰æ·±åº¦ä½†æ®µè½åˆ†æ˜ã€‚"
          };

          const systemPrompt = `ä½ æ˜¯ä¸€ä½å°ˆç²¾ Threads èˆ‡ SEO çš„å°ç£å‰µä½œè€…ï¼Œæ“…é•·ç”¨ã€Œåƒæœ‹å‹èŠå¤©ã€çš„å£å»å¯«ä½œã€‚

## åš´æ ¼ç¦æ­¢
- çµ•å°ç¦æ­¢ä½¿ç”¨ã€Œèº«ç‚º AIã€ã€ã€Œæ ¹æ“šè³‡æ–™ã€ã€ã€Œæ ¹æ“šç ”ç©¶ã€ç­‰èªå¥
- ä¸è¦ç”¨ä¼æ¥­æ–‡æ¡ˆçš„åƒµç¡¬æ„Ÿ
- ä¸è¦èªªæ•™æˆ–è¬›å¤§é“ç†

## çˆ†æ¬¾çµæ§‹ï¼ˆå¿…é ˆåš´æ ¼éµå®ˆï¼‰

1. é‰¤å­ï¼ˆå‰10-15å­—ï¼‰ï¼šå¿…é ˆåŒ…å«ä¸»é—œéµå­—ï¼Œç”¨åå¸¸è­˜è§€é»æˆ–é©šäººæ•¸å­—é–‹é ­
2. ç—›é»æŒ–æ˜ï¼šç”¨ã€Œä½ æ˜¯ä¸æ˜¯ä¹Ÿ...ã€é–‹é ­ï¼Œè®“è®€è€…ç”¢ç”Ÿå…±é³´
3. åƒ¹å€¼æ–¹æ¡ˆï¼šçµ¦äºˆ1-3å€‹å¯¦éš›å¯è¡Œçš„å»ºè­°
4. é‡‘å¥ï¼šæ ¼å¼å¿…é ˆæ˜¯ã€ŒğŸ’¡ è§€é»ï¼š[ä¸€å¥è©±é‡‘å¥]ã€
5. Hashtagï¼šçµå°¾é™„ä¸Šç›¸é—œ Hashtag

## æ ¼å¼è¦æ±‚
- æ¯æ®µ â‰¤ 2 è¡Œ
- æ®µè½ä¹‹é–“è¦æœ‰ç©ºè¡Œ
- ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡

## é•·åº¦è¦æ±‚
${lengthGuides[length]}`;

          const userPrompt = mode === 'url' 
            ? `è«‹åˆ†æé€™å€‹ç¶²é çš„å…§å®¹ï¼Œç„¶å¾Œç”¨ä½ çš„è§€é»å¯«æˆä¸€ç¯‡ Threads çˆ†æ¬¾è²¼æ–‡ï¼š${input}`
            : `è«‹ä»¥ã€Œ${input}ã€ç‚ºä¸»é¡Œï¼Œå¯«ä¸€ç¯‡ Threads çˆ†æ¬¾è²¼æ–‡ã€‚`;

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: systemPrompt + "\n\n" + userPrompt
                }]
              }],
              generationConfig: {
                temperature: 0.85,
                maxOutputTokens: 2048,
              }
            })
          });

          const data = await response.json();
          
          if (data.error) {
            throw new Error(data.error.message || 'ç”Ÿæˆå¤±æ•—');
          }
          
          if (data.candidates && data.candidates[0] && data.candidates[0].content) {
            return data.candidates[0].content.parts[0].text;
          }
          
          throw new Error('ç„¡æ³•å–å¾—ç”Ÿæˆçµæœ');
        };

        // --- PostCard å…ƒä»¶ ---
        const PostCard = ({ content, onRegenerate }) => {
          const [copied, setCopied] = useState(false);
          const paragraphs = content.split('\n');

          const copy = () => {
            navigator.clipboard.writeText(content);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          };

          return (
            <div className="w-full animate-slide-up mt-8">
              <div className="bg-white rounded-[2rem] p-6 md:p-8 shadow-2xl shadow-amber-200/50 border border-amber-100">
                <div className="flex items-center justify-between mb-6">
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-yellow-400 to-amber-500 flex items-center justify-center text-[#452a00] font-bold">T</div>
                    <div>
                      <div className="font-bold text-sm text-[#452a00]">Threads_Maker <span className="text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded ml-1">PRO</span></div>
                      <div className="text-[10px] text-amber-400">å‰›å‰›ç”Ÿæˆ â€¢ AI å‰µä½œ</div>
                    </div>
                  </div>
                  <button onClick={copy} className={`text-xs font-bold px-4 py-2 rounded-full transition-all ${copied ? 'bg-green-500 text-white' : 'bg-amber-50 text-amber-600 hover:bg-amber-100'}`}>
                    {copied ? 'âœ“ å·²è¤‡è£½' : 'ä¸€éµè¤‡è£½'}
                  </button>
                </div>
                
                <div className="space-y-3">
                  {paragraphs.map((p, i) => {
                    if (!p.trim()) return <div key={i} className="h-2"></div>;
                    const isHighlight = p.includes('ğŸ’¡');
                    const isHashtag = p.trim().startsWith('#');
                    return (
                      <p key={i} className={`
                        ${isHighlight ? 'text-lg font-bold text-[#452a00] border-l-4 border-[#FCC800] pl-4 py-1 bg-amber-50/50 rounded-r-lg' : ''}
                        ${isHashtag ? 'text-sm text-amber-500 font-medium' : ''}
                        ${!isHighlight && !isHashtag ? 'text-base text-amber-900 leading-relaxed' : ''}
                      `}>
                        {p.replace(/\*\*/g, '')}
                      </p>
                    );
                  })}
                </div>

                <div className="mt-8 pt-6 border-t border-amber-50 flex gap-3">
                  <button onClick={onRegenerate} className="flex-1 py-3 text-sm font-bold text-amber-500 hover:text-amber-700 transition-colors border border-amber-200 rounded-xl hover:bg-amber-50">
                    ğŸ”„ é‡æ–°ç”Ÿæˆ
                  </button>
                  <button onClick={copy} className="flex-1 py-3 text-sm font-bold bg-[#FCC800] text-[#452a00] rounded-xl hover:brightness-105 transition-all">
                    ğŸ“‹ è¤‡è£½å…¨æ–‡
                  </button>
                </div>
              </div>
            </div>
          );
        };

        // --- ä¸»ç¨‹å¼ App (ç°¡åŒ–ç‰ˆï¼Œå…ˆç§»é™¤ Firebase ç™»å…¥) ---
        function App() {
          const [inputMode, setInputMode] = useState('topic');
          const [inputText, setInputText] = useState('');
          const [length, setLength] = useState('medium');
          const [result, setResult] = useState('');
          const [loading, setLoading] = useState(false);
          const [error, setError] = useState('');

          const handleGenerate = async () => {
            if (!inputText.trim()) {
              setError('è«‹è¼¸å…¥å…§å®¹');
              return;
            }
            
            setLoading(true);
            setError('');
            setResult('');
            
            try {
              const post = await generateContent(inputText, inputMode, length);
              setResult(post);
              window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            } catch (err) {
              console.error("ç”ŸæˆéŒ¯èª¤:", err);
              setError('éŒ¯èª¤: ' + err.message);
            } finally {
              setLoading(false);
            }
          };

          return (
            <div className="min-h-screen p-6 md:p-12 flex flex-col items-center">
              {/* Header */}
              <nav className="w-full max-w-5xl flex justify-between items-center mb-16">
                <div className="flex items-center gap-2 font-black text-2xl tracking-tighter">
                  <div className="w-10 h-10 bg-[#FCC800] rounded-xl flex items-center justify-center shadow-lg shadow-amber-200">T</div>
                  <span>Threads<span className="text-amber-500">Maker</span></span>
                </div>
                <div className="flex items-center gap-4 bg-white px-5 py-2.5 rounded-2xl border border-amber-100 shadow-sm">
                  <span className="text-[10px] font-black text-amber-600 tracking-widest">PRO ç‰ˆ</span>
                </div>
              </nav>

              <div className="w-full max-w-xl">
                <div className="text-center mb-10">
                  <h1 className="text-4xl md:text-5xl font-black text-[#452a00] mb-4">ä»Šå¤©æƒ³çˆ†ç´…å—ï¼Ÿ</h1>
                  <p className="text-amber-700/50 font-medium">è¼¸å…¥ä½ çš„éˆæ„Ÿï¼Œè®“ AI ç‚ºä½ ç²¾æº–é‰¤å¼•æµé‡</p>
                </div>

                <div className="bg-white rounded-[2.5rem] shadow-xl p-8 border border-amber-50">
                  {/* Mode Toggle */}
                  <div className="flex gap-2 mb-8 bg-amber-50 p-1.5 rounded-2xl">
                    <button onClick={()=>setInputMode('topic')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='topic'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>âœï¸ ä¸»é¡Œå‰µä½œ</button>
                    <button onClick={()=>setInputMode('url')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='url'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>ğŸ”— ç¶²é è½‰è­¯</button>
                  </div>

                  {/* Mode Description */}
                  <div className="mb-6 p-4 bg-amber-50/50 rounded-2xl">
                    <p className="text-xs text-amber-600">
                      {inputMode === 'topic' 
                        ? 'ğŸ’¡ è¼¸å…¥ä»»ä½•ä¸»é¡Œï¼ŒAI æœƒç”¨çˆ†æ¬¾å…¬å¼å¹«ä½ å¯«å‡ºå¸ç›è²¼æ–‡' 
                        : 'ğŸ”— è¼¸å…¥ä¸»é¡Œæˆ–é—œéµå­—ï¼ŒAI æœƒå¹«ä½ å‰µä½œç›¸é—œå…§å®¹'}
                    </p>
                  </div>

                  {/* Length Selector */}
                  <div className="mb-8">
                    <div className="flex justify-between mb-3 px-1">
                      <label className="text-xs font-black text-[#452a00] uppercase tracking-wider">æ–‡æ¡ˆç¯‡å¹…</label>
                      <span className="text-[10px] font-bold text-amber-400 italic">SEO + æ¼”ç®—æ³•å„ªåŒ–</span>
                    </div>
                    <div className="grid grid-cols-3 gap-2 p-1.5 bg-amber-50 rounded-2xl">
                      {[
                        { key: 'short', label: 'æ¥µçŸ­', desc: '80-120å­—' },
                        { key: 'medium', label: 'æ¨™æº–', desc: '200-300å­—' },
                        { key: 'long', label: 'æ·±åº¦', desc: '400-600å­—' }
                      ].map(l => (
                        <button 
                          key={l.key} 
                          onClick={()=>setLength(l.key)} 
                          className={`py-2 rounded-xl text-xs font-bold transition-all ${length===l.key?'bg-white shadow-sm':'text-amber-400 hover:text-amber-600'}`}
                        >
                          <div>{l.label}</div>
                          <div className="text-[10px] font-normal opacity-60">{l.desc}</div>
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* Input Area */}
                  <textarea 
                    value={inputText} 
                    onChange={(e)=>setInputText(e.target.value)}
                    placeholder={inputMode === 'topic' ? "ä¾‹å¦‚ï¼šå¦‚ä½•å¾ 0 åˆ° 1 é–‹å§‹åšå‰¯æ¥­ã€ç‚ºä»€éº¼æ—©èµ·åè€Œæ›´ç´¯ã€30æ­²è½‰è·çš„çœŸå¯¦å¿ƒå¾—..." : "è¼¸å…¥ä½ æƒ³å‰µä½œçš„ä¸»é¡Œæˆ–é—œéµå­—..."}
                    className="w-full min-h-[140px] p-6 rounded-3xl bg-amber-50/50 border-none focus:ring-2 focus:ring-[#FCC800] text-[#452a00] placeholder-amber-300 mb-6 resize-none"
                  />

                  <button onClick={handleGenerate} disabled={loading} className={`w-full py-5 rounded-3xl font-black text-lg shadow-xl transition-all transform active:scale-95 ${loading ? 'bg-amber-100 text-amber-300' : 'bg-[#FCC800] text-[#452a00] hover:brightness-105 shadow-amber-200'}`}>
                    {loading ? 'ğŸš€ AI æ­£åœ¨æ‰“é€ ä½ çš„çˆ†æ¬¾æ–‡æ¡ˆ...' : 'ç”Ÿæˆçˆ†æ¬¾æ–‡æ¡ˆ'}
                  </button>
                  
                  {error && <p className="text-red-500 text-center mt-4 text-sm font-bold">{error}</p>}
                </div>

                {result && <PostCard content={result} onRegenerate={handleGenerate} />}
                
                <footer className="mt-20 mb-10 text-center">
                  <div className="text-[10px] text-amber-200 font-black tracking-[0.3em] uppercase mb-2">Secure AI Content Engine</div>
                  <div className="text-[9px] text-amber-100">Â© 2025 Threads Maker Pro. All rights reserved.</div>
                </footer>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    
</body>
</html>
