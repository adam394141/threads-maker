<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threads çˆ†æ¬¾ç”Ÿæˆå™¨ | Pro ç‰ˆ</title>
    <link rel="icon" href="favicon.png">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fffef5;
            color: #452a00;
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // ========== ç‰ˆæœ¬è³‡è¨Š ==========
        const VERSION_DATE = "2024-12-30";
        const VERSION_TEXT = "v1.4 æ›´æ–°ï¼šçˆ†æ¬¾ç´ æåŒ…å…©éšæ®µæµç¨‹ + å¢åŠ æ–‡æ¡ˆå­—æ•¸";
        // ==============================

        // ========== è«‹åœ¨é€™è£¡å¡«å…¥ä½ çš„ Groq API Key ==========
        const GROQ_API_KEY = "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";
        // ==================================================

        // --- SEO çˆ†æ¬¾ Prompt è¨­å®šï¼ˆå­—æ•¸å¢åŠ ç‰ˆï¼‰---
        const getSystemPrompt = (length) => {
          const lengthGuides = {
            short: "ã€ç²¾ç°¡ç‰ˆã€‘ç¸½å­—æ•¸ï¼š200-300å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + ç—›é»(1æ®µ) + æ ¸å¿ƒè§€é»(1-2æ®µ) + ğŸ’¡é‡‘å¥ + ğŸ’¬äº’å‹•å‹¾å­ + 3å€‹Hashtagã€‚é¢¨æ ¼ï¼šç°¡æ½”æœ‰åŠ›ä½†å…§å®¹å®Œæ•´ã€‚",
            medium: "ã€æ¨™æº–ç‰ˆã€‘ç¸½å­—æ•¸ï¼š400-500å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + ç—›é»(1-2æ®µ) + æ–¹æ¡ˆ(2æ®µ) + ğŸ’¡é‡‘å¥ + ğŸ’¬äº’å‹•å‹¾å­ + 4å€‹Hashtagã€‚é¢¨æ ¼ï¼šå®Œæ•´æ•˜è¿°ï¼Œæ¯æ®µâ‰¤3è¡Œï¼Œæœ‰æ•…äº‹æ„Ÿã€‚",
            long: "ã€æ·±åº¦ç‰ˆã€‘ç¸½å­—æ•¸ï¼š600-800å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + æ•…äº‹/æ¡ˆä¾‹(2-3æ®µ) + ç—›é»åˆ†æ(1-2æ®µ) + å…·é«”æ–¹æ¡ˆ(3-4é») + ğŸ’¡é‡‘å¥ + ğŸ’¬äº’å‹•å‹¾å­ + ç¸½çµ + 5å€‹Hashtagã€‚é¢¨æ ¼ï¼šåƒä¸€ç¯‡æœ‰æ·±åº¦çš„åˆ†äº«æ–‡ï¼Œæ®µè½åˆ†æ˜ï¼Œå…§å®¹ç´®å¯¦ã€‚"
          };

          return `## è§’è‰²è¨­å®š
ä½ æ˜¯ä¸€ä½å°ˆç²¾ Threads èˆ‡ SEO çš„å°ç£å‰µä½œè€…ï¼Œæ“…é•·ç”¨ã€Œåƒæœ‹å‹èŠå¤©ã€çš„å£å»å¯«ä½œã€‚
ä½ æ‡‚æµé‡ã€æ‡‚ SEOã€æ‡‚äººæ€§ã€‚ä½ çš„æ–‡å­—çœŸèª ã€å¹½é»˜ã€æœ‰æº«åº¦ã€‚

## åš´æ ¼ç¦æ­¢
- âŒ çµ•å°ç¦æ­¢ä½¿ç”¨ã€Œèº«ç‚º AIã€ã€ã€Œæ ¹æ“šè³‡æ–™ã€ã€ã€Œæ ¹æ“šç ”ç©¶ã€ã€ã€Œä½œç‚ºä¸€å€‹ã€ç­‰èªå¥
- âŒ ä¸è¦ç”¨ä¼æ¥­æ–‡æ¡ˆçš„åƒµç¡¬æ„Ÿ
- âŒ ä¸è¦èªªæ•™æˆ–è¬›å¤§é“ç†
- âŒ ä¸è¦ç”¨éå¤šçš„è¡¨æƒ…ç¬¦è™Ÿï¼ˆæœ€å¤š3å€‹ï¼‰

## çˆ†æ¬¾çµæ§‹ï¼ˆå¿…é ˆåš´æ ¼éµå®ˆï¼‰

### 1. é‰¤å­ï¼ˆå‰10-15å­—ï¼‰âš¡
- å¿…é ˆåŒ…å«ä¸»é—œéµå­—
- å¿…é ˆæ˜¯ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®ï¼š
  * åå¸¸è­˜è§€é»ï¼ˆä¾‹ï¼šã€Œæ—©èµ·å…¶å¯¦è®“ä½ æ›´çª®ã€ï¼‰
  * é©šäººæ•¸å­—ï¼ˆä¾‹ï¼šã€Œ90%çš„äººéƒ½åšéŒ¯äº†ã€ï¼‰
  * ç›´æ¥æˆ³ç—›é»ï¼ˆä¾‹ï¼šã€Œä½ æ˜¯ä¸æ˜¯ä¹Ÿå¸¸å¸¸...ã€ï¼‰
  * æ‡¸å¿µæå•ï¼ˆä¾‹ï¼šã€Œç‚ºä»€éº¼è¶ŠåŠªåŠ›è¶Šç„¦æ…®ï¼Ÿã€ï¼‰
- ç›®æ¨™ï¼šè®“äººåœ¨ç€‘å¸ƒæµä¸­ã€Œä¸‰ç§’åœé “ã€

### 2. ç—›é»æŒ–æ˜ ğŸ’”
- ç”¨ã€Œä½ æ˜¯ä¸æ˜¯ä¹Ÿ...ã€ã€Œæˆ‘ä»¥å‰ä¹Ÿ...ã€é–‹é ­
- æè¿°å…·é«”å ´æ™¯ï¼Œè®“è®€è€…ç”¢ç”Ÿã€Œé€™å°±æ˜¯åœ¨èªªæˆ‘ã€çš„å…±é³´
- ä¸è¦æ³›æ³›è€Œè«‡ï¼Œè¦æœ‰ç•«é¢æ„Ÿ
- å¯ä»¥åŠ å…¥å€‹äººæ•…äº‹æˆ–æ¡ˆä¾‹

### 3. åƒ¹å€¼æ–¹æ¡ˆ ğŸ’¡
- çµ¦äºˆå¯¦éš›å¯è¡Œçš„å»ºè­°æˆ–æ–¹æ³•
- æ¯å€‹å»ºè­°è¦å…·é«”åˆ°ã€Œä»Šå¤©å°±èƒ½åšã€
- å¯ä»¥ç”¨æ¢åˆ—æˆ–æ•…äº‹æ–¹å¼å‘ˆç¾
- å¢åŠ è¢«ã€Œæ”¶è—ã€æˆ–ã€Œè½‰ç™¼ã€çš„æ©Ÿç‡

### 4. é‡‘å¥ï¼ˆå¿…é ˆåŒ…å«ï¼‰âœ¨
- æ ¼å¼ï¼šğŸ’¡ [ä¸€å¥è©±é‡‘å¥]
- é€™å¥è©±è¦é©åˆè¢«æˆªåœ–åˆ†äº«
- è¦æœ‰è¨˜æ†¶é»ï¼Œè®“äººæƒ³å­˜ä¸‹ä¾†

### 5. äº’å‹•å‹¾å­ï¼ˆå¿…é ˆåŒ…å«ï¼‰ğŸ’¬
- æ ¼å¼ï¼šğŸ’¬ [äº’å‹•å•å¥]
- æ”¾åœ¨é‡‘å¥ä¹‹å¾Œã€Hashtag ä¹‹å‰
- å¿…é ˆä½¿ç”¨ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®å…¬å¼ï¼š
  * æå•å‹ï¼šã€Œä½ è¦ºå¾—å‘¢ï¼Ÿã€ã€Œä½ æœ‰éé€™ç¨®ç¶“é©—å—ï¼Ÿã€
  * äºŒé¸ä¸€å‹ï¼šã€Œä½ æ˜¯ A é‚„æ˜¯ Bï¼Ÿç•™è¨€å‘Šè¨´æˆ‘ã€
  * å¡«ç©ºå‹ï¼šã€Œ___æ˜¯æˆ‘ä»Šå¹´æœ€å¤§çš„æ”¹è®Šï¼Œä½ å‘¢ï¼Ÿã€
  * åˆ†äº«å‹ï¼šã€Œç•™è¨€åˆ†äº«ä½ çš„ [ç›¸é—œç¶“é©—]ã€
  * æŠ•ç¥¨å‹ï¼šã€ŒåŒæ„çš„æ‰“ 1ï¼Œä¸åŒæ„çš„æ‰“ 2ã€
  * æŒ‘æˆ°å‹ï¼šã€Œæ•¢åœ¨ç•™è¨€å€èªªå‡ºä½ çš„ [ç›¸é—œè©±é¡Œ] å—ï¼Ÿã€
  * æ¨™è¨˜å‹ï¼šã€Œ@ä¸€å€‹éœ€è¦çœ‹åˆ°é€™ç¯‡çš„æœ‹å‹ã€
- ç›®æ¨™ï¼šè®“è®€è€…ã€Œå¿ä¸ä½æƒ³å›è¦†ã€

### 6. Hashtag ğŸ“Œ
- çµå°¾é™„ä¸Šç›¸é—œ Hashtag
- é¸æ“‡æœ‰æœå°‹é‡çš„æ¨™ç±¤
- æ ¼å¼ï¼š#é—œéµå­—1 #é—œéµå­—2 #é—œéµå­—3

## SEO èˆ‡å¯è®€æ€§è¦å‰‡
- âœ… æ¯æ®µ â‰¤ 3 è¡Œï¼ˆæ‰‹æ©Ÿé–±è®€å‹å–„ï¼‰
- âœ… æ®µè½ä¹‹é–“è¦æœ‰ç©ºè¡Œ
- âœ… é—œéµå­—è‡ªç„¶èå…¥æ¨™é¡Œå’Œç¬¬ä¸€æ®µ
- âœ… ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡å’Œå°ç£ç”¨èª
- âœ… èªæ°£åƒåœ¨è·Ÿå¥½æœ‹å‹åˆ†äº«å¿ƒå¾—

## é•·åº¦è¦æ±‚
${lengthGuides[length]}`;
        };

        // ç¶²é è½‰è­¯æ¨¡å¼çš„ Prompt
        const getUrlSystemPrompt = (length) => {
          const basePrompt = getSystemPrompt(length);
          return basePrompt + `

## ç¶²é è½‰è­¯ç‰¹åˆ¥è¦å‰‡
- âŒ ä¸è¦ã€Œæ‘˜è¦ã€æ–‡ç« ï¼ˆé€™å¾ˆç„¡èŠï¼‰
- âœ… è¦ã€Œè©•è«–ã€æ–‡ç« ï¼ˆé€™æ‰æœ‰å€‹äººç‰¹è‰²ï¼‰
- æŠŠã€Œç¬¬ä¸‰äººç¨±çš„è³‡è¨Šã€è½‰åŒ–ç‚ºã€Œç¬¬ä¸€äººç¨±çš„é«”æœƒã€
- åƒæ˜¯ä½ è®€å®Œæ–‡ç« å¾Œï¼Œè¿«ä¸åŠå¾…æƒ³è·Ÿæœ‹å‹åˆ†äº«çš„æ„Ÿè¦º
- ç¦æ­¢ä½¿ç”¨ã€Œé€™ç¯‡æ–‡ç« èªª...ã€ã€Œæ ¹æ“šé€™ç¯‡å ±å°...ã€`;
        };

        // çˆ†æ¬¾æ¨™é¡Œç”Ÿæˆ Promptï¼ˆç¬¬ä¸€éšæ®µï¼‰
        const getTitleSystemPrompt = () => {
          return `## è§’è‰²è¨­å®š
ä½ æ˜¯ä¸€ä½å°ˆç²¾ç¤¾ç¾¤çˆ†æ¬¾æ¨™é¡Œçš„å°ç£å‰µä½œè€…ï¼Œæ“…é•·å¯«å‡ºè®“äººã€Œä¸‰ç§’åœé “ã€çš„æ¨™é¡Œã€‚

## çˆ†æ¬¾æ¨™é¡Œå…¬å¼ï¼ˆå¿…é ˆä½¿ç”¨ 5 ç¨®ä¸åŒå…¬å¼ï¼‰

### å…¬å¼ä¸€ï¼šã€Œå¤§éƒ¨åˆ†äººä»¥ç‚º...ã€èªçŸ¥é¡›è¦†å‹
- æ ¼å¼ï¼šå¤§éƒ¨åˆ†äººä»¥ç‚º [å¸¸è¦‹èªçŸ¥]
- ä¾‹å­ï¼šå¤§éƒ¨åˆ†äººä»¥ç‚ºç•¶è€å¸«å°±æ˜¯éµé£¯ç¢—

### å…¬å¼äºŒï¼šã€Œç‚ºä»€éº¼ X åè€Œ Yï¼Ÿã€åå¸¸è­˜å‹
- æ ¼å¼ï¼šç‚ºä»€éº¼ [æ­£é¢è¡Œç‚º] åè€Œ [è² é¢çµæœ]ï¼Ÿ
- ä¾‹å­ï¼šç‚ºä»€éº¼è¶ŠåŠªåŠ›åè€Œè¶Šçª®ï¼Ÿ

### å…¬å¼ä¸‰ï¼šæ•¸å­—è¡æ“Šå‹
- æ ¼å¼ï¼š[éœ‡æ’¼æ•¸å­—] + [æ„å¤–äº‹å¯¦]
- ä¾‹å­ï¼š90% çš„äººéƒ½åšéŒ¯äº†é€™ä»¶äº‹

### å…¬å¼å››ï¼šç›´æ¥æˆ³ç—›é»å‹
- æ ¼å¼ï¼šä½ æ˜¯ä¸æ˜¯ä¹Ÿ [ç—›é»æè¿°]
- ä¾‹å­ï¼šä½ æ˜¯ä¸æ˜¯ä¹Ÿå¸¸å¸¸åŠ ç­åˆ°æ‡·ç–‘äººç”Ÿï¼Ÿ

### å…¬å¼äº”ï¼šæ‡¸å¿µæ­éœ²å‹
- æ ¼å¼ï¼š[ç¾è±¡/è·æ¥­/é ˜åŸŸ] çš„çœŸç›¸æ˜¯...
- ä¾‹å­ï¼šç¾åœ¨è€å¸«é›¢è·ç‡è¶…é«˜

## è¼¸å‡ºæ ¼å¼ï¼ˆå¿…é ˆåš´æ ¼éµå®ˆï¼‰
è«‹è¼¸å‡º 5 å€‹æ¨™é¡Œï¼Œæ¯å€‹æ¨™é¡Œä¸€è¡Œï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

1. [æ¨™é¡Œä¸€]
2. [æ¨™é¡ŒäºŒ]
3. [æ¨™é¡Œä¸‰]
4. [æ¨™é¡Œå››]
5. [æ¨™é¡Œäº”]

## åš´æ ¼ç¦æ­¢
- âŒ ä¸è¦åŠ ä»»ä½•è§£é‡‹æˆ–èªªæ˜
- âŒ ä¸è¦åŠ å…¬å¼åç¨±
- âŒ åªè¦æ¨™é¡Œï¼Œä¸è¦å…¶ä»–å…§å®¹
- âŒ ä¸è¦ç”¨ã€Œèº«ç‚º AIã€ç­‰èªå¥
- âœ… ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡`;
        };

        // æ ¹æ“šé¸å®šæ¨™é¡Œç”Ÿæˆå…§æ–‡ Promptï¼ˆç¬¬äºŒéšæ®µï¼‰
        const getContentFromTitlePrompt = () => {
          return `## è§’è‰²è¨­å®š
ä½ æ˜¯ä¸€ä½å°ˆç²¾ Threads èˆ‡ SEO çš„å°ç£å‰µä½œè€…ï¼Œæ“…é•·ç”¨ã€Œåƒæœ‹å‹èŠå¤©ã€çš„å£å»å¯«ä½œã€‚

## ä»»å‹™
æ ¹æ“šæˆ‘çµ¦ä½ çš„æ¨™é¡Œï¼Œå¯«ä¸€ç¯‡å®Œæ•´çš„ Threads çˆ†æ¬¾è²¼æ–‡ã€‚

## è¼¸å‡ºçµæ§‹ï¼ˆå¿…é ˆåŒ…å«ä»¥ä¸‹æ‰€æœ‰å…ƒç´ ï¼‰

### å…§æ–‡ï¼ˆ300-400å­—ï¼‰
- ç¬¬ä¸€æ®µï¼šæ‰¿æ¥æ¨™é¡Œï¼Œè£½é€ å…±é³´ï¼ˆç”¨ã€Œä½ æ˜¯ä¸æ˜¯ä¹Ÿ...ã€æˆ–ã€Œæˆ‘ä»¥å‰ä¹Ÿ...ã€é–‹é ­ï¼‰
- ç¬¬äºŒæ®µï¼šæ·±å…¥ç—›é»ï¼Œæè¿°å…·é«”å ´æ™¯
- ç¬¬ä¸‰æ®µï¼šçµ¦å‡ºè§€é»æˆ–è§£æ±ºæ–¹æ¡ˆ
- ç¬¬å››æ®µï¼šç¸½çµæˆ–æ˜‡è¯

### é‡‘å¥
ğŸ’¡ [ä¸€å¥è©±é‡‘å¥ï¼Œé©åˆè¢«æˆªåœ–åˆ†äº«]

### äº’å‹•å‹¾å­
ğŸ’¬ [ä¸€å€‹è®“äººå¿ä¸ä½æƒ³å›è¦†çš„å•å¥]

äº’å‹•å‹¾å­é¡å‹ï¼ˆé¸ä¸€ç¨®ï¼‰ï¼š
- æå•å‹ï¼šã€Œä½ è¦ºå¾—å‘¢ï¼Ÿã€
- äºŒé¸ä¸€å‹ï¼šã€Œä½ æ˜¯ A é‚„æ˜¯ Bï¼Ÿã€
- å¡«ç©ºå‹ï¼šã€Œ___æ˜¯æˆ‘æœ€å¤§çš„æ”¹è®Šï¼Œä½ å‘¢ï¼Ÿã€
- æŠ•ç¥¨å‹ï¼šã€ŒåŒæ„çš„æ‰“ 1ï¼Œä¸åŒæ„çš„æ‰“ 2ã€
- æ¨™è¨˜å‹ï¼šã€Œ@ä¸€å€‹éœ€è¦çœ‹åˆ°é€™ç¯‡çš„æœ‹å‹ã€

### Hashtag
#æ¨™ç±¤1 #æ¨™ç±¤2 #æ¨™ç±¤3 #æ¨™ç±¤4

## å¯«ä½œè¦å‰‡
- âœ… æ¯æ®µ â‰¤ 3 è¡Œ
- âœ… æ®µè½ä¹‹é–“è¦æœ‰ç©ºè¡Œ
- âœ… èªæ°£åƒè·Ÿå¥½æœ‹å‹èŠå¤©
- âœ… ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡
- âŒ ä¸è¦ç”¨ã€Œèº«ç‚º AIã€ã€ã€Œæ ¹æ“šè³‡æ–™ã€ç­‰èªå¥
- âŒ ä¸è¦èªªæ•™`;
        };

        // --- AI ç”Ÿæˆå‡½æ•¸ (ä½¿ç”¨ Groq API) ---
        const generateContent = async (input, mode, length, selectedTitle = null) => {
          let systemPrompt;
          let userPrompt;

          if (mode === 'package-titles') {
            // ç¬¬ä¸€éšæ®µï¼šç”Ÿæˆ5å€‹æ¨™é¡Œ
            systemPrompt = getTitleSystemPrompt();
            userPrompt = `è«‹é‡å°ã€Œ${input}ã€é€™å€‹ä¸»é¡Œï¼Œç”Ÿæˆ 5 å€‹ä¸åŒå…¬å¼çš„çˆ†æ¬¾æ¨™é¡Œã€‚`;
          } else if (mode === 'package-content') {
            // ç¬¬äºŒéšæ®µï¼šæ ¹æ“šé¸å®šæ¨™é¡Œç”Ÿæˆå…§æ–‡
            systemPrompt = getContentFromTitlePrompt();
            userPrompt = `è«‹æ ¹æ“šé€™å€‹æ¨™é¡Œå¯«ä¸€ç¯‡å®Œæ•´çš„ Threads è²¼æ–‡ï¼š\n\næ¨™é¡Œï¼š${selectedTitle}\n\nä¸»é¡ŒèƒŒæ™¯ï¼š${input}`;
          } else if (mode === 'url') {
            systemPrompt = getUrlSystemPrompt(length);
            userPrompt = `è«‹åˆ†æé€™å€‹ä¸»é¡Œ/ç¶²é å…§å®¹ï¼Œç„¶å¾Œç”¨ä½ çš„è§€é»å¯«æˆä¸€ç¯‡ Threads çˆ†æ¬¾è²¼æ–‡ï¼š${input}`;
          } else {
            systemPrompt = getSystemPrompt(length);
            userPrompt = `è«‹ä»¥ã€Œ${input}ã€ç‚ºä¸»é¡Œï¼Œå¯«ä¸€ç¯‡ Threads çˆ†æ¬¾è²¼æ–‡ã€‚`;
          }

          const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${GROQ_API_KEY}`
            },
            body: JSON.stringify({
              model: "llama-3.3-70b-versatile",
              messages: [
                { role: "system", content: systemPrompt },
                { role: "user", content: userPrompt }
              ],
              temperature: 0.85,
              max_tokens: 2048
            })
          });

          const data = await response.json();
          
          if (data.error) {
            throw new Error(data.error.message || 'ç”Ÿæˆå¤±æ•—');
          }
          
          if (data.choices && data.choices[0] && data.choices[0].message) {
            return data.choices[0].message.content;
          }
          
          throw new Error('ç„¡æ³•å–å¾—ç”Ÿæˆçµæœ');
        };

        // --- PostCard å…ƒä»¶ ---
        const PostCard = ({ content, onRegenerate }) => {
          const [copied, setCopied] = useState(false);
          const paragraphs = content.split('\n');

          const copy = () => {
            navigator.clipboard.writeText(content);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          };

          return (
            <div className="w-full animate-slide-up mt-8">
              <div className="bg-white rounded-3xl p-6 md:p-8 shadow-2xl shadow-amber-200/50 border border-amber-100">
                <div className="flex items-center justify-between mb-6">
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-yellow-400 to-amber-500 flex items-center justify-center text-[#452a00] font-bold">T</div>
                    <div>
                      <div className="font-bold text-sm text-[#452a00]">
                        Threads_Maker
                        <span className="text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded ml-1">PRO</span>
                      </div>
                      <div className="text-[10px] text-amber-400">å‰›å‰›ç”Ÿæˆ â€¢ AI å‰µä½œ</div>
                    </div>
                  </div>
                  <button onClick={copy} className={`text-xs font-bold px-4 py-2 rounded-full transition-all ${copied ? 'bg-green-500 text-white' : 'bg-amber-50 text-amber-600 hover:bg-amber-100'}`}>
                    {copied ? 'âœ“ å·²è¤‡è£½' : 'ä¸€éµè¤‡è£½'}
                  </button>
                </div>
                
                <div className="space-y-2">
                  {paragraphs.map((p, i) => {
                    if (!p.trim()) return <div key={i} className="h-2"></div>;
                    
                    const isHighlight = p.includes('ğŸ’¡') && !p.startsWith('##') && !p.startsWith('#');
                    const isInteraction = p.includes('ğŸ’¬') && !p.startsWith('##');
                    const isHashtag = (p.trim().startsWith('#') && !p.startsWith('##') && !p.startsWith('#ï¸âƒ£') && p.includes(' #')) || (p.split('#').length > 2 && !p.startsWith('##'));
                    const isHeader = p.startsWith('### ') || p.startsWith('## ');
                    
                    if (isHeader) {
                      return (
                        <h3 key={i} className="text-base font-black text-[#452a00] mt-4 mb-2">
                          {p.replace('### ', '').replace('## ', '')}
                        </h3>
                      );
                    }
                    
                    return (
                      <p key={i} className={`
                        ${isHighlight ? 'text-base font-bold text-[#452a00] border-l-4 border-[#FCC800] pl-4 py-2 bg-amber-50/50 rounded-r-lg my-3' : ''}
                        ${isInteraction ? 'text-base font-bold text-blue-600 border-l-4 border-blue-400 pl-4 py-2 bg-blue-50/50 rounded-r-lg my-3' : ''}
                        ${isHashtag ? 'text-sm text-amber-500 font-medium py-2' : ''}
                        ${!isHighlight && !isInteraction && !isHashtag ? 'text-base text-amber-900 leading-relaxed' : ''}
                      `}>
                        {p.replace(/\*\*/g, '')}
                      </p>
                    );
                  })}
                </div>

                <div className="mt-8 pt-6 border-t border-amber-50 flex gap-3">
                  <button onClick={onRegenerate} className="flex-1 py-3 text-sm font-bold text-amber-500 hover:text-amber-700 transition-colors border border-amber-200 rounded-xl hover:bg-amber-50">
                    ğŸ”„ é‡æ–°ç”Ÿæˆ
                  </button>
                  <button onClick={copy} className="flex-1 py-3 text-sm font-bold bg-[#FCC800] text-[#452a00] rounded-xl hover:brightness-105 transition-all">
                    ğŸ“‹ è¤‡è£½å…¨æ–‡
                  </button>
                </div>
              </div>
            </div>
          );
        };

        // --- æ¨™é¡Œé¸æ“‡å…ƒä»¶ ---
        const TitleSelector = ({ titles, onSelect, onRegenerate, loading }) => {
          const parseTitles = (text) => {
            const lines = text.split('\n').filter(line => line.trim());
            return lines.map(line => line.replace(/^\d+[\.\ã€\:\ï¼š]\s*/, '').trim()).filter(t => t.length > 0);
          };

          const titleList = parseTitles(titles);

          return (
            <div className="w-full animate-slide-up mt-8">
              <div className="bg-white rounded-3xl p-6 md:p-8 shadow-2xl shadow-amber-200/50 border border-amber-100">
                <div className="flex items-center gap-3 mb-6">
                  <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-orange-400 to-red-500 flex items-center justify-center text-white font-bold">ğŸ”¥</div>
                  <div>
                    <div className="font-bold text-sm text-[#452a00]">é¸æ“‡ä¸€å€‹çˆ†æ¬¾æ¨™é¡Œ</div>
                    <div className="text-[10px] text-amber-400">é»æ“Šæ¨™é¡Œå¾Œæœƒç”Ÿæˆå®Œæ•´å…§æ–‡</div>
                  </div>
                </div>
                
                <div className="space-y-3">
                  {titleList.map((title, i) => (
                    <button
                      key={i}
                      onClick={() => onSelect(title)}
                      disabled={loading}
                      className={`w-full text-left p-4 rounded-2xl border-2 transition-all ${loading ? 'opacity-50 cursor-not-allowed' : 'border-amber-100 hover:border-[#FCC800] hover:bg-amber-50 active:scale-[0.98]'}`}
                    >
                      <div className="flex items-start gap-3">
                        <span className="text-lg font-black text-[#FCC800]">{i + 1}</span>
                        <span className="text-base font-bold text-[#452a00] leading-relaxed">{title}</span>
                      </div>
                    </button>
                  ))}
                </div>

                <div className="mt-6 pt-4 border-t border-amber-50">
                  <button onClick={onRegenerate} disabled={loading} className="w-full py-3 text-sm font-bold text-amber-500 hover:text-amber-700 transition-colors border border-amber-200 rounded-xl hover:bg-amber-50 disabled:opacity-50">
                    ğŸ”„ é‡æ–°ç”Ÿæˆæ¨™é¡Œ
                  </button>
                </div>
              </div>
            </div>
          );
        };

        // --- ä¸»ç¨‹å¼ App ---
        function App() {
          const [inputMode, setInputMode] = useState('topic');
          const [inputText, setInputText] = useState('');
          const [length, setLength] = useState('medium');
          const [result, setResult] = useState('');
          const [loading, setLoading] = useState(false);
          const [error, setError] = useState('');
          
          // çˆ†æ¬¾ç´ æåŒ…çš„ç‹€æ…‹
          const [packageStep, setPackageStep] = useState(1); // 1: é¸æ¨™é¡Œ, 2: é¡¯ç¤ºå…§æ–‡
          const [generatedTitles, setGeneratedTitles] = useState('');
          const [selectedTitle, setSelectedTitle] = useState('');

          const handleGenerate = async () => {
            if (!inputText.trim()) {
              setError('è«‹è¼¸å…¥å…§å®¹');
              return;
            }
            
            setLoading(true);
            setError('');
            setResult('');
            setGeneratedTitles('');
            setSelectedTitle('');
            setPackageStep(1);
            
            try {
              if (inputMode === 'package') {
                // çˆ†æ¬¾ç´ æåŒ…ï¼šç¬¬ä¸€éšæ®µç”Ÿæˆæ¨™é¡Œ
                const titles = await generateContent(inputText, 'package-titles', length);
                setGeneratedTitles(titles);
              } else {
                // å…¶ä»–æ¨¡å¼ï¼šç›´æ¥ç”Ÿæˆå®Œæ•´å…§æ–‡
                const post = await generateContent(inputText, inputMode, length);
                setResult(post);
              }
              window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            } catch (err) {
              console.error("ç”ŸæˆéŒ¯èª¤:", err);
              setError('éŒ¯èª¤: ' + err.message);
            } finally {
              setLoading(false);
            }
          };

          const handleTitleSelect = async (title) => {
            setLoading(true);
            setSelectedTitle(title);
            setError('');
            
            try {
              // ç¬¬äºŒéšæ®µï¼šæ ¹æ“šé¸å®šæ¨™é¡Œç”Ÿæˆå…§æ–‡
              const content = await generateContent(inputText, 'package-content', length, title);
              setResult(`${title}\n\n${content}`);
              setPackageStep(2);
              window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            } catch (err) {
              console.error("ç”ŸæˆéŒ¯èª¤:", err);
              setError('éŒ¯èª¤: ' + err.message);
            } finally {
              setLoading(false);
            }
          };

          const handleRegenerateTitles = async () => {
            setLoading(true);
            setError('');
            
            try {
              const titles = await generateContent(inputText, 'package-titles', length);
              setGeneratedTitles(titles);
            } catch (err) {
              console.error("ç”ŸæˆéŒ¯èª¤:", err);
              setError('éŒ¯èª¤: ' + err.message);
            } finally {
              setLoading(false);
            }
          };

          const handleModeChange = (mode) => {
            setInputMode(mode);
            setResult('');
            setGeneratedTitles('');
            setSelectedTitle('');
            setPackageStep(1);
            setError('');
          };

          const getModeDescription = () => {
            switch(inputMode) {
              case 'topic': return 'ğŸ’¡ è¼¸å…¥ä»»ä½•ä¸»é¡Œï¼ŒAI æœƒç”¨çˆ†æ¬¾å…¬å¼å¹«ä½ å¯«å‡ºå®Œæ•´è²¼æ–‡';
              case 'package': return 'ğŸ å…©æ­¥é©Ÿï¼šå…ˆé¸æ¨™é¡Œ â†’ å†ç”Ÿæˆå…§æ–‡ï¼ˆå«é‡‘å¥+äº’å‹•å‹¾å­+Hashtagï¼‰';
              case 'url': return 'ğŸ”— è¼¸å…¥ä¸»é¡Œæˆ–æè¿°ï¼ŒAI æœƒç”¨ã€Œä½ çš„è¦–è§’ã€é‡æ–°è©®é‡‹';
              default: return '';
            }
          };

          const getPlaceholder = () => {
            switch(inputMode) {
              case 'topic': return 'ä¾‹å¦‚ï¼šå¦‚ä½•å¾ 0 åˆ° 1 é–‹å§‹åšå‰¯æ¥­ã€ç‚ºä»€éº¼æ—©èµ·åè€Œæ›´ç´¯ã€30æ­²è½‰è·çš„çœŸå¯¦å¿ƒå¾—...';
              case 'package': return 'ä¾‹å¦‚ï¼šæ•™è‚²å•é¡Œã€è·å ´åŠ ç­ã€ç†è²¡è§€å¿µã€è¦ªå­é—œä¿‚ã€è‡ªæˆ‘æˆé•·...';
              case 'url': return 'è¼¸å…¥ä½ æƒ³å‰µä½œçš„ä¸»é¡Œæˆ–é—œéµå­—...';
              default: return '';
            }
          };

          const getButtonText = () => {
            if (loading) return 'ğŸš€ AI æ­£åœ¨æ‰“é€ ä½ çš„çˆ†æ¬¾å…§å®¹...';
            switch(inputMode) {
              case 'package': return 'ç”Ÿæˆçˆ†æ¬¾æ¨™é¡Œ';
              default: return 'ç”Ÿæˆçˆ†æ¬¾æ–‡æ¡ˆ';
            }
          };

          return (
            <div className="min-h-screen p-6 md:p-12 flex flex-col items-center">
              {/* Header */}
              <nav className="w-full max-w-5xl flex justify-between items-center mb-12">
                <div className="flex items-center gap-2 font-black text-2xl tracking-tighter">
                  <div className="w-10 h-10 bg-[#FCC800] rounded-xl flex items-center justify-center shadow-lg shadow-amber-200">T</div>
                  <span>Threads<span className="text-amber-500">Maker</span></span>
                </div>
                <div className="bg-white px-5 py-2.5 rounded-2xl border border-amber-100 shadow-sm">
                  <span className="text-[10px] font-black text-amber-600 tracking-widest">PRO ç‰ˆ</span>
                </div>
              </nav>

              <div className="w-full max-w-xl">
                <div className="text-center mb-10">
                  <h1 className="text-4xl md:text-5xl font-black text-[#452a00] mb-4">ä»Šå¤©æƒ³çˆ†ç´…å—ï¼Ÿ</h1>
                  <p className="text-amber-700/50 font-medium">è¼¸å…¥ä½ çš„éˆæ„Ÿï¼Œè®“ AI ç‚ºä½ ç²¾æº–é‰¤å¼•æµé‡</p>
                </div>

                <div className="bg-white rounded-[2.5rem] shadow-xl p-8 border border-amber-50">
                  {/* Mode Toggle - 3 å€‹é¸é … */}
                  <div className="flex gap-2 mb-6 bg-amber-50 p-1.5 rounded-2xl">
                    <button onClick={()=>handleModeChange('topic')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='topic'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>âœï¸ ä¸»é¡Œå‰µä½œ</button>
                    <button onClick={()=>handleModeChange('package')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='package'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>ğŸ çˆ†æ¬¾ç´ æåŒ…</button>
                    <button onClick={()=>handleModeChange('url')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='url'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>ğŸ”— ç¶²é è½‰è­¯</button>
                  </div>

                  {/* Mode Description */}
                  <div className="mb-6 p-4 bg-amber-50/50 rounded-2xl">
                    <p className="text-xs text-amber-600">{getModeDescription()}</p>
                  </div>

                  {/* Length Selector - åªåœ¨ä¸»é¡Œå‰µä½œå’Œç¶²é è½‰è­¯æ¨¡å¼é¡¯ç¤º */}
                  {(inputMode === 'topic' || inputMode === 'url') && (
                    <div className="mb-6">
                      <div className="flex justify-between mb-3 px-1">
                        <label className="text-xs font-black text-[#452a00] uppercase tracking-wider">æ–‡æ¡ˆç¯‡å¹…</label>
                        <span className="text-[10px] font-bold text-amber-400 italic">SEO + æ¼”ç®—æ³•å„ªåŒ–</span>
                      </div>
                      <div className="grid grid-cols-3 gap-2 p-1.5 bg-amber-50 rounded-2xl">
                        {[
                          { key: 'short', label: 'ç²¾ç°¡', desc: '200-300å­—' },
                          { key: 'medium', label: 'æ¨™æº–', desc: '400-500å­—' },
                          { key: 'long', label: 'æ·±åº¦', desc: '600-800å­—' }
                        ].map(l => (
                          <button 
                            key={l.key} 
                            onClick={()=>setLength(l.key)} 
                            className={`py-2 rounded-xl text-xs font-bold transition-all ${length===l.key?'bg-white shadow-sm':'text-amber-400 hover:text-amber-600'}`}
                          >
                            <div>{l.label}</div>
                            <div className="text-[10px] font-normal opacity-60">{l.desc}</div>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}

                  {/* çˆ†æ¬¾ç´ æåŒ…æµç¨‹èªªæ˜ */}
                  {inputMode === 'package' && (
                    <div className="mb-6 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-2xl border border-amber-100">
                      <p className="text-xs font-bold text-[#452a00] mb-2">ğŸ“¦ å…©æ­¥é©Ÿæµç¨‹ï¼š</p>
                      <div className="flex items-center gap-2 text-[11px] text-amber-700">
                        <span className={`px-2 py-1 rounded-full ${packageStep === 1 ? 'bg-[#FCC800] text-[#452a00] font-bold' : 'bg-amber-100'}`}>1. é¸æ¨™é¡Œ</span>
                        <span>â†’</span>
                        <span className={`px-2 py-1 rounded-full ${packageStep === 2 ? 'bg-[#FCC800] text-[#452a00] font-bold' : 'bg-amber-100'}`}>2. ç”Ÿæˆå…§æ–‡</span>
                      </div>
                    </div>
                  )}

                  {/* Input Area */}
                  <textarea 
                    value={inputText} 
                    onChange={(e)=>setInputText(e.target.value)}
                    placeholder={getPlaceholder()}
                    className="w-full min-h-[120px] p-5 rounded-2xl bg-amber-50/50 border-none focus:ring-2 focus:ring-[#FCC800] text-[#452a00] placeholder-amber-300 mb-6 resize-none"
                  />

                  <button onClick={handleGenerate} disabled={loading} className={`w-full py-4 rounded-2xl font-black text-lg shadow-xl transition-all transform active:scale-95 ${loading ? 'bg-amber-100 text-amber-300' : 'bg-[#FCC800] text-[#452a00] hover:brightness-105 shadow-amber-200'}`}>
                    {getButtonText()}
                  </button>
                  
                  {error && <p className="text-red-500 text-center mt-4 text-sm font-bold">{error}</p>}
                </div>

                {/* çˆ†æ¬¾ç´ æåŒ…ï¼šé¡¯ç¤ºæ¨™é¡Œé¸æ“‡ */}
                {inputMode === 'package' && generatedTitles && packageStep === 1 && (
                  <TitleSelector 
                    titles={generatedTitles} 
                    onSelect={handleTitleSelect}
                    onRegenerate={handleRegenerateTitles}
                    loading={loading}
                  />
                )}

                {/* é¡¯ç¤ºç”Ÿæˆçµæœ */}
                {result && <PostCard content={result} onRegenerate={inputMode === 'package' ? handleRegenerateTitles : handleGenerate} />}
                
                <footer className="mt-16 mb-8 text-center">
                  <div className="text-[10px] text-amber-300 font-bold tracking-widest uppercase mb-1">Powered by Llama 3.3</div>
                  <div className="text-[9px] text-amber-200">Â© 2025 Threads Maker Pro</div>
                  <div className="text-[9px] text-amber-300 mt-2">ğŸ“… {VERSION_DATE} | {VERSION_TEXT}</div>
                </footer>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
