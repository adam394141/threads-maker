<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Threads çˆ†æ¬¾ç”Ÿæˆå™¨ | Pro ç‰ˆ</title>
    <link rel="icon" href="favicon.png">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fffef5;
            color: #452a00;
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // ========== ç‰ˆæœ¬è³‡è¨Š ==========
        const VERSION_DATE = "2024-12-30";
        const VERSION_TEXT = "v1.3 æ›´æ–°ï¼šçˆ†æ¬¾ç´ æåŒ…ï¼ˆæ¨™é¡Œ+å…§æ–‡+å‹¾å­ï¼‰";
        // ==============================

        // ========== è«‹åœ¨é€™è£¡å¡«å…¥ä½ çš„ Groq API Key ==========
        const GROQ_API_KEY = "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";
        // ==================================================

        // --- SEO çˆ†æ¬¾ Prompt è¨­å®š ---
        const getSystemPrompt = (length) => {
          const lengthGuides = {
            short: "ã€æ¥µçŸ­ç²¾ç…‰ã€‘ç¸½å­—æ•¸ï¼š80-120å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + æ ¸å¿ƒè§€é»(1-2å¥) + ğŸ’¡é‡‘å¥ + äº’å‹•å‹¾å­ + 2å€‹Hashtagã€‚é¢¨æ ¼ï¼šåƒä¸€å‰‡æœ‰åŠ›çš„æ¨æ–‡ï¼Œä¸€é‡è¦‹è¡€ã€‚",
            medium: "ã€æ¨™æº–æ¨¡å¼ã€‘ç¸½å­—æ•¸ï¼š200-300å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + ç—›é»(1æ®µ) + æ–¹æ¡ˆ(1æ®µ) + ğŸ’¡é‡‘å¥ + äº’å‹•å‹¾å­ + 3-4å€‹Hashtagã€‚é¢¨æ ¼ï¼šå®Œæ•´ä½†ä¸å›‰å—¦ï¼Œæ¯æ®µâ‰¤2è¡Œã€‚",
            long: "ã€æ·±åº¦é•·æ–‡ã€‘ç¸½å­—æ•¸ï¼š400-600å­—ã€‚çµæ§‹ï¼šé‰¤å­(1å¥) + æ•…äº‹/æ¡ˆä¾‹(1-2æ®µ) + ç—›é»åˆ†æ(1æ®µ) + å…·é«”æ–¹æ¡ˆ(2-3é») + ğŸ’¡é‡‘å¥ + äº’å‹•å‹¾å­ + ç¸½çµ + 5å€‹Hashtagã€‚é¢¨æ ¼ï¼šåƒä¸€ç¯‡è¿·ä½ éƒ¨è½æ ¼ï¼Œæœ‰æ·±åº¦ä½†æ®µè½åˆ†æ˜ã€‚"
          };

          return `## è§’è‰²è¨­å®š
ä½ æ˜¯ä¸€ä½å°ˆç²¾ Threads èˆ‡ SEO çš„å°ç£å‰µä½œè€…ï¼Œæ“…é•·ç”¨ã€Œåƒæœ‹å‹èŠå¤©ã€çš„å£å»å¯«ä½œã€‚
ä½ æ‡‚æµé‡ã€æ‡‚ SEOã€æ‡‚äººæ€§ã€‚ä½ çš„æ–‡å­—çœŸèª ã€å¹½é»˜ã€æœ‰æº«åº¦ã€‚

## åš´æ ¼ç¦æ­¢
- âŒ çµ•å°ç¦æ­¢ä½¿ç”¨ã€Œèº«ç‚º AIã€ã€ã€Œæ ¹æ“šè³‡æ–™ã€ã€ã€Œæ ¹æ“šç ”ç©¶ã€ã€ã€Œä½œç‚ºä¸€å€‹ã€ç­‰èªå¥
- âŒ ä¸è¦ç”¨ä¼æ¥­æ–‡æ¡ˆçš„åƒµç¡¬æ„Ÿ
- âŒ ä¸è¦èªªæ•™æˆ–è¬›å¤§é“ç†
- âŒ ä¸è¦ç”¨éå¤šçš„è¡¨æƒ…ç¬¦è™Ÿï¼ˆæœ€å¤š3å€‹ï¼‰

## çˆ†æ¬¾çµæ§‹ï¼ˆå¿…é ˆåš´æ ¼éµå®ˆï¼‰

### 1. é‰¤å­ï¼ˆå‰10-15å­—ï¼‰âš¡
- å¿…é ˆåŒ…å«ä¸»é—œéµå­—
- å¿…é ˆæ˜¯ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®ï¼š
  * åå¸¸è­˜è§€é»ï¼ˆä¾‹ï¼šã€Œæ—©èµ·å…¶å¯¦è®“ä½ æ›´çª®ã€ï¼‰
  * é©šäººæ•¸å­—ï¼ˆä¾‹ï¼šã€Œ90%çš„äººéƒ½åšéŒ¯äº†ã€ï¼‰
  * ç›´æ¥æˆ³ç—›é»ï¼ˆä¾‹ï¼šã€Œä½ æ˜¯ä¸æ˜¯ä¹Ÿå¸¸å¸¸...ã€ï¼‰
  * æ‡¸å¿µæå•ï¼ˆä¾‹ï¼šã€Œç‚ºä»€éº¼è¶ŠåŠªåŠ›è¶Šç„¦æ…®ï¼Ÿã€ï¼‰
- ç›®æ¨™ï¼šè®“äººåœ¨ç€‘å¸ƒæµä¸­ã€Œä¸‰ç§’åœé “ã€

### 2. ç—›é»æŒ–æ˜ï¼ˆç¬¬äºŒæ®µï¼‰ğŸ’”
- ç”¨ã€Œä½ æ˜¯ä¸æ˜¯ä¹Ÿ...ã€ã€Œæˆ‘ä»¥å‰ä¹Ÿ...ã€é–‹é ­
- æè¿°å…·é«”å ´æ™¯ï¼Œè®“è®€è€…ç”¢ç”Ÿã€Œé€™å°±æ˜¯åœ¨èªªæˆ‘ã€çš„å…±é³´
- ä¸è¦æ³›æ³›è€Œè«‡ï¼Œè¦æœ‰ç•«é¢æ„Ÿ

### 3. åƒ¹å€¼æ–¹æ¡ˆï¼ˆç¬¬ä¸‰æ®µï¼‰ğŸ’¡
- çµ¦äºˆ 1-3 å€‹å¯¦éš›å¯è¡Œçš„å»ºè­°æˆ–æ–¹æ³•
- æ¯å€‹å»ºè­°è¦å…·é«”åˆ°ã€Œä»Šå¤©å°±èƒ½åšã€
- å¢åŠ è¢«ã€Œæ”¶è—ã€æˆ–ã€Œè½‰ç™¼ã€çš„æ©Ÿç‡

### 4. é‡‘å¥ï¼ˆå¿…é ˆåŒ…å«ï¼‰âœ¨
- æ ¼å¼ï¼šğŸ’¡ è§€é»ï¼š[ä¸€å¥è©±é‡‘å¥]
- é€™å¥è©±è¦é©åˆè¢«æˆªåœ–åˆ†äº«
- è¦æœ‰è¨˜æ†¶é»ï¼Œè®“äººæƒ³å­˜ä¸‹ä¾†

### 5. äº’å‹•å‹¾å­ï¼ˆå¿…é ˆåŒ…å«ï¼‰ğŸ’¬
- æ”¾åœ¨é‡‘å¥ä¹‹å¾Œã€Hashtag ä¹‹å‰
- æ ¼å¼ï¼šğŸ’¬ [äº’å‹•å•å¥]
- å¿…é ˆä½¿ç”¨ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®å…¬å¼ï¼š
  * æå•å‹ï¼šã€Œä½ è¦ºå¾—å‘¢ï¼Ÿã€ã€Œä½ æœ‰éé€™ç¨®ç¶“é©—å—ï¼Ÿã€
  * äºŒé¸ä¸€å‹ï¼šã€Œä½ æ˜¯ A é‚„æ˜¯ Bï¼Ÿç•™è¨€å‘Šè¨´æˆ‘ã€
  * å¡«ç©ºå‹ï¼šã€Œ___æ˜¯æˆ‘ä»Šå¹´æœ€å¤§çš„æ”¹è®Šï¼Œä½ å‘¢ï¼Ÿã€
  * åˆ†äº«å‹ï¼šã€Œç•™è¨€åˆ†äº«ä½ çš„ [ç›¸é—œç¶“é©—]ã€
  * æŠ•ç¥¨å‹ï¼šã€ŒåŒæ„çš„æ‰“ 1ï¼Œä¸åŒæ„çš„æ‰“ 2ã€
  * æŒ‘æˆ°å‹ï¼šã€Œæ•¢åœ¨ç•™è¨€å€èªªå‡ºä½ çš„ [ç›¸é—œè©±é¡Œ] å—ï¼Ÿã€
  * æ¨™è¨˜å‹ï¼šã€Œ@ä¸€å€‹éœ€è¦çœ‹åˆ°é€™ç¯‡çš„æœ‹å‹ã€
- ç›®æ¨™ï¼šè®“è®€è€…ã€Œå¿ä¸ä½æƒ³å›è¦†ã€

### 6. Hashtag ğŸ“Œ
- çµå°¾é™„ä¸Šç›¸é—œ Hashtag
- é¸æ“‡æœ‰æœå°‹é‡çš„æ¨™ç±¤
- æ ¼å¼ï¼š#é—œéµå­—1 #é—œéµå­—2 #é—œéµå­—3

## SEO èˆ‡å¯è®€æ€§è¦å‰‡
- âœ… æ¯æ®µ â‰¤ 2 è¡Œï¼ˆé€™æ˜¯æ‰‹æ©Ÿé–±è®€çš„é»ƒé‡‘æ³•å‰‡ï¼‰
- âœ… æ®µè½ä¹‹é–“è¦æœ‰ç©ºè¡Œ
- âœ… é—œéµå­—è‡ªç„¶èå…¥æ¨™é¡Œå’Œç¬¬ä¸€æ®µ
- âœ… ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡å’Œå°ç£ç”¨èª
- âœ… èªæ°£åƒåœ¨è·Ÿå¥½æœ‹å‹åˆ†äº«å¿ƒå¾—

## é•·åº¦è¦æ±‚
${lengthGuides[length]}`;
        };

        // ç¶²é è½‰è­¯æ¨¡å¼çš„ Prompt
        const getUrlSystemPrompt = (length) => {
          const basePrompt = getSystemPrompt(length);
          return basePrompt + `

## ç¶²é è½‰è­¯ç‰¹åˆ¥è¦å‰‡
- âŒ ä¸è¦ã€Œæ‘˜è¦ã€æ–‡ç« ï¼ˆé€™å¾ˆç„¡èŠï¼‰
- âœ… è¦ã€Œè©•è«–ã€æ–‡ç« ï¼ˆé€™æ‰æœ‰å€‹äººç‰¹è‰²ï¼‰
- æŠŠã€Œç¬¬ä¸‰äººç¨±çš„è³‡è¨Šã€è½‰åŒ–ç‚ºã€Œç¬¬ä¸€äººç¨±çš„é«”æœƒã€
- åƒæ˜¯ä½ è®€å®Œæ–‡ç« å¾Œï¼Œè¿«ä¸åŠå¾…æƒ³è·Ÿæœ‹å‹åˆ†äº«çš„æ„Ÿè¦º
- ç¦æ­¢ä½¿ç”¨ã€Œé€™ç¯‡æ–‡ç« èªª...ã€ã€Œæ ¹æ“šé€™ç¯‡å ±å°...ã€`;
        };

        // çˆ†æ¬¾ç´ æåŒ…æ¨¡å¼çš„ Promptï¼ˆæ¨™é¡Œ + å…§æ–‡ + å‹¾å­ï¼‰
        const getPackageSystemPrompt = () => {
          return `## è§’è‰²è¨­å®š
ä½ æ˜¯ä¸€ä½å°ˆç²¾ Threads èˆ‡ç¤¾ç¾¤çˆ†æ¬¾çš„å°ç£å‰µä½œè€…ï¼Œæ“…é•·å¯«å‡ºè®“äººã€Œä¸‰ç§’åœé “ã€ä¸¦ã€Œå¿ä¸ä½äº’å‹•ã€çš„å…§å®¹ã€‚

## è¼¸å‡ºæ ¼å¼ï¼ˆå¿…é ˆåš´æ ¼éµå®ˆï¼‰

è«‹ä¾ç…§ä»¥ä¸‹æ ¼å¼è¼¸å‡ºå®Œæ•´çš„çˆ†æ¬¾ç´ æåŒ…ï¼š

---

## ğŸ”¥ çˆ†æ¬¾æ¨™é¡Œï¼ˆ5 é¸ 1ï¼‰

1. [æ¨™é¡Œä¸€ï¼šå¤§éƒ¨åˆ†äººä»¥ç‚º...å‹]
2. [æ¨™é¡ŒäºŒï¼šç‚ºä»€éº¼ X åè€Œ Yï¼Ÿå‹]
3. [æ¨™é¡Œä¸‰ï¼šæ•¸å­—è¡æ“Šå‹]
4. [æ¨™é¡Œå››ï¼šç›´æ¥æˆ³ç—›é»å‹]
5. [æ¨™é¡Œäº”ï¼šæ‡¸å¿µæå•å‹]

---

## ğŸ“ å…§æ–‡

[ç”¨ 150-200 å­—å¯«ä¸€æ®µç²¾ç°¡å…§æ–‡]

è¦æ±‚ï¼š
- ç¬¬ä¸€å¥æ‰¿æ¥æ¨™é¡Œçš„æ‡¸å¿µ
- ä¸­é–“æˆ³ä¸­è®€è€…ç—›é»ï¼Œè£½é€ å…±é³´
- çµ¦å‡º 1-2 å€‹å¯¦éš›å¯è¡Œçš„è§€é»æˆ–å»ºè­°
- èªæ°£åƒè·Ÿå¥½æœ‹å‹èŠå¤©
- æ¯æ®µä¸è¶…é 2 è¡Œ

---

## ğŸ’¡ é‡‘å¥

ğŸ’¡ è§€é»ï¼š[ä¸€å¥è©±é‡‘å¥ï¼Œé©åˆè¢«æˆªåœ–åˆ†äº«]

---

## ğŸ’¬ äº’å‹•å‹¾å­ï¼ˆ3 é¸ 1ï¼‰

1. [æå•/äºŒé¸ä¸€å‹å‹¾å­]
2. [å¡«ç©º/åˆ†äº«å‹å‹¾å­]
3. [æŠ•ç¥¨/æŒ‘æˆ°å‹å‹¾å­]

---

## #ï¸âƒ£ Hashtag

#æ¨™ç±¤1 #æ¨™ç±¤2 #æ¨™ç±¤3 #æ¨™ç±¤4

---

## çˆ†æ¬¾æ¨™é¡Œå…¬å¼èªªæ˜

### å…¬å¼ä¸€ï¼šã€Œå¤§éƒ¨åˆ†äººä»¥ç‚º...ã€èªçŸ¥é¡›è¦†å‹
- æ ¼å¼ï¼šå¤§éƒ¨åˆ†äººä»¥ç‚º [å¸¸è¦‹èªçŸ¥]
- ä¾‹å­ï¼šå¤§éƒ¨åˆ†äººä»¥ç‚ºç•¶è€å¸«å°±æ˜¯éµé£¯ç¢—

### å…¬å¼äºŒï¼šã€Œç‚ºä»€éº¼ X åè€Œ Yï¼Ÿã€åå¸¸è­˜å‹
- æ ¼å¼ï¼šç‚ºä»€éº¼ [æ­£é¢è¡Œç‚º] åè€Œ [è² é¢çµæœ]ï¼Ÿ
- ä¾‹å­ï¼šç‚ºä»€éº¼è¶ŠåŠªåŠ›åè€Œè¶Šçª®ï¼Ÿ

### å…¬å¼ä¸‰ï¼šæ•¸å­—è¡æ“Šå‹
- æ ¼å¼ï¼š[éœ‡æ’¼æ•¸å­—] + [æ„å¤–äº‹å¯¦]
- ä¾‹å­ï¼š90% çš„äººéƒ½åšéŒ¯äº†é€™ä»¶äº‹

### å…¬å¼å››ï¼šç›´æ¥æˆ³ç—›é»å‹
- æ ¼å¼ï¼šä½ æ˜¯ä¸æ˜¯ä¹Ÿ [ç—›é»æè¿°]
- ä¾‹å­ï¼šä½ æ˜¯ä¸æ˜¯ä¹Ÿå¸¸å¸¸åŠ ç­åˆ°æ‡·ç–‘äººç”Ÿï¼Ÿ

### å…¬å¼äº”ï¼šæ‡¸å¿µæå•å‹
- æ ¼å¼ï¼š[å¼•ç™¼å¥½å¥‡çš„å•é¡Œ]
- ä¾‹å­ï¼šç‚ºä»€éº¼æˆ‘æ”¾æ£„å¹´è–ªç™¾è¬çš„å·¥ä½œï¼Ÿ

## äº’å‹•å‹¾å­å…¬å¼èªªæ˜

- æå•å‹ï¼šã€Œä½ è¦ºå¾—å‘¢ï¼Ÿã€ã€Œä½ æœ‰éé€™ç¨®ç¶“é©—å—ï¼Ÿã€
- äºŒé¸ä¸€å‹ï¼šã€Œä½ æ˜¯ A é‚„æ˜¯ Bï¼Ÿã€
- å¡«ç©ºå‹ï¼šã€Œ___æ˜¯æˆ‘ä»Šå¹´æœ€å¤§çš„æ”¹è®Šï¼Œä½ å‘¢ï¼Ÿã€
- åˆ†äº«å‹ï¼šã€Œç•™è¨€åˆ†äº«ä½ çš„ [ç¶“é©—]ã€
- æŠ•ç¥¨å‹ï¼šã€ŒåŒæ„çš„æ‰“ 1ï¼Œä¸åŒæ„çš„æ‰“ 2ã€
- æŒ‘æˆ°å‹ï¼šã€Œæ•¢èªªå‡ºä½ çš„ [è©±é¡Œ] å—ï¼Ÿã€
- æ¨™è¨˜å‹ï¼šã€Œ@ä¸€å€‹éœ€è¦çœ‹åˆ°é€™ç¯‡çš„æœ‹å‹ã€

## åš´æ ¼ç¦æ­¢
- âŒ ä¸è¦ç”¨ã€Œèº«ç‚º AIã€ã€ã€Œæ ¹æ“šè³‡æ–™ã€ç­‰èªå¥
- âŒ ä¸è¦ç”¨ä¼æ¥­æ–‡æ¡ˆçš„åƒµç¡¬æ„Ÿ
- âŒ ä¸è¦èªªæ•™æˆ–è¬›å¤§é“ç†
- âŒ ä½¿ç”¨å°ç£ç¹é«”ä¸­æ–‡å’Œå°ç£ç”¨èª`;
        };

        // --- AI ç”Ÿæˆå‡½æ•¸ (ä½¿ç”¨ Groq API) ---
        const generateContent = async (input, mode, length) => {
          let systemPrompt;
          let userPrompt;

          if (mode === 'package') {
            systemPrompt = getPackageSystemPrompt();
            userPrompt = `è«‹é‡å°ã€Œ${input}ã€é€™å€‹ä¸»é¡Œï¼Œç”Ÿæˆå®Œæ•´çš„çˆ†æ¬¾ç´ æåŒ…ï¼ˆåŒ…å« 5 å€‹æ¨™é¡Œé¸é …ã€å…§æ–‡ã€é‡‘å¥ã€3 å€‹äº’å‹•å‹¾å­é¸é …ã€Hashtagï¼‰ã€‚`;
          } else if (mode === 'url') {
            systemPrompt = getUrlSystemPrompt(length);
            userPrompt = `è«‹åˆ†æé€™å€‹ä¸»é¡Œ/ç¶²é å…§å®¹ï¼Œç„¶å¾Œç”¨ä½ çš„è§€é»å¯«æˆä¸€ç¯‡ Threads çˆ†æ¬¾è²¼æ–‡ï¼š${input}`;
          } else {
            systemPrompt = getSystemPrompt(length);
            userPrompt = `è«‹ä»¥ã€Œ${input}ã€ç‚ºä¸»é¡Œï¼Œå¯«ä¸€ç¯‡ Threads çˆ†æ¬¾è²¼æ–‡ã€‚`;
          }

          const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${GROQ_API_KEY}`
            },
            body: JSON.stringify({
              model: "llama-3.3-70b-versatile",
              messages: [
                { role: "system", content: systemPrompt },
                { role: "user", content: userPrompt }
              ],
              temperature: 0.85,
              max_tokens: 2048
            })
          });

          const data = await response.json();
          
          if (data.error) {
            throw new Error(data.error.message || 'ç”Ÿæˆå¤±æ•—');
          }
          
          if (data.choices && data.choices[0] && data.choices[0].message) {
            return data.choices[0].message.content;
          }
          
          throw new Error('ç„¡æ³•å–å¾—ç”Ÿæˆçµæœ');
        };

        // --- PostCard å…ƒä»¶ ---
        const PostCard = ({ content, onRegenerate, mode }) => {
          const [copied, setCopied] = useState(false);
          const paragraphs = content.split('\n');

          const copy = () => {
            navigator.clipboard.writeText(content);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          };

          const getCardTitle = () => {
            switch(mode) {
              case 'package': return 'çˆ†æ¬¾ç´ æåŒ…';
              default: return 'Threads_Maker';
            }
          };

          return (
            <div className="w-full animate-slide-up mt-8">
              <div className="bg-white rounded-3xl p-6 md:p-8 shadow-2xl shadow-amber-200/50 border border-amber-100">
                <div className="flex items-center justify-between mb-6">
                  <div className="flex items-center gap-3">
                    <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-yellow-400 to-amber-500 flex items-center justify-center text-[#452a00] font-bold">T</div>
                    <div>
                      <div className="font-bold text-sm text-[#452a00]">
                        {getCardTitle()} 
                        <span className="text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded ml-1">PRO</span>
                      </div>
                      <div className="text-[10px] text-amber-400">å‰›å‰›ç”Ÿæˆ â€¢ AI å‰µä½œ</div>
                    </div>
                  </div>
                  <button onClick={copy} className={`text-xs font-bold px-4 py-2 rounded-full transition-all ${copied ? 'bg-green-500 text-white' : 'bg-amber-50 text-amber-600 hover:bg-amber-100'}`}>
                    {copied ? 'âœ“ å·²è¤‡è£½' : 'ä¸€éµè¤‡è£½'}
                  </button>
                </div>
                
                <div className="space-y-2">
                  {paragraphs.map((p, i) => {
                    if (!p.trim()) return <div key={i} className="h-2"></div>;
                    
                    // åˆ¤æ–·ä¸åŒé¡å‹çš„è¡Œ
                    const isMainHeader = p.startsWith('## ');
                    const isSeparator = p.trim() === '---';
                    const isHighlight = p.includes('ğŸ’¡') && !p.startsWith('##');
                    const isInteraction = p.includes('ğŸ’¬') && !p.startsWith('##');
                    const isHashtag = (p.trim().startsWith('#') && !p.startsWith('##') && !p.startsWith('#ï¸âƒ£')) || (p.includes('#') && p.split('#').length > 2);
                    const isNumbered = /^\d+[\.\ã€]/.test(p.trim());
                    
                    if (isSeparator) {
                      return <hr key={i} className="border-amber-100 my-4" />;
                    }
                    
                    if (isMainHeader) {
                      return (
                        <h3 key={i} className="text-lg font-black text-[#452a00] mt-6 mb-3 flex items-center gap-2">
                          {p.replace('## ', '')}
                        </h3>
                      );
                    }
                    
                    return (
                      <p key={i} className={`
                        ${isHighlight ? 'text-base font-bold text-[#452a00] border-l-4 border-[#FCC800] pl-4 py-2 bg-amber-50/50 rounded-r-lg my-3' : ''}
                        ${isInteraction ? 'text-base font-bold text-blue-600 border-l-4 border-blue-400 pl-4 py-2 bg-blue-50/50 rounded-r-lg my-2' : ''}
                        ${isHashtag ? 'text-sm text-amber-500 font-medium py-2' : ''}
                        ${isNumbered ? 'text-base text-[#452a00] py-1.5 pl-2 border-l-2 border-amber-200 ml-2' : ''}
                        ${!isHighlight && !isInteraction && !isHashtag && !isNumbered ? 'text-base text-amber-900 leading-relaxed' : ''}
                      `}>
                        {p.replace(/\*\*/g, '')}
                      </p>
                    );
                  })}
                </div>

                <div className="mt-8 pt-6 border-t border-amber-50 flex gap-3">
                  <button onClick={onRegenerate} className="flex-1 py-3 text-sm font-bold text-amber-500 hover:text-amber-700 transition-colors border border-amber-200 rounded-xl hover:bg-amber-50">
                    ğŸ”„ é‡æ–°ç”Ÿæˆ
                  </button>
                  <button onClick={copy} className="flex-1 py-3 text-sm font-bold bg-[#FCC800] text-[#452a00] rounded-xl hover:brightness-105 transition-all">
                    ğŸ“‹ è¤‡è£½å…¨æ–‡
                  </button>
                </div>
              </div>
            </div>
          );
        };

        // --- ä¸»ç¨‹å¼ App ---
        function App() {
          const [inputMode, setInputMode] = useState('topic');
          const [inputText, setInputText] = useState('');
          const [length, setLength] = useState('medium');
          const [result, setResult] = useState('');
          const [loading, setLoading] = useState(false);
          const [error, setError] = useState('');

          const handleGenerate = async () => {
            if (!inputText.trim()) {
              setError('è«‹è¼¸å…¥å…§å®¹');
              return;
            }
            
            setLoading(true);
            setError('');
            setResult('');
            
            try {
              const post = await generateContent(inputText, inputMode, length);
              setResult(post);
              window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            } catch (err) {
              console.error("ç”ŸæˆéŒ¯èª¤:", err);
              setError('éŒ¯èª¤: ' + err.message);
            } finally {
              setLoading(false);
            }
          };

          const getModeDescription = () => {
            switch(inputMode) {
              case 'topic': return 'ğŸ’¡ è¼¸å…¥ä»»ä½•ä¸»é¡Œï¼ŒAI æœƒç”¨çˆ†æ¬¾å…¬å¼å¹«ä½ å¯«å‡ºå®Œæ•´è²¼æ–‡';
              case 'package': return 'ğŸ ä¸€æ¬¡ç”Ÿæˆï¼š5 å€‹æ¨™é¡Œ + å…§æ–‡ + é‡‘å¥ + 3 å€‹äº’å‹•å‹¾å­ + Hashtag';
              case 'url': return 'ğŸ”— è¼¸å…¥ä¸»é¡Œæˆ–æè¿°ï¼ŒAI æœƒç”¨ã€Œä½ çš„è¦–è§’ã€é‡æ–°è©®é‡‹';
              default: return '';
            }
          };

          const getPlaceholder = () => {
            switch(inputMode) {
              case 'topic': return 'ä¾‹å¦‚ï¼šå¦‚ä½•å¾ 0 åˆ° 1 é–‹å§‹åšå‰¯æ¥­ã€ç‚ºä»€éº¼æ—©èµ·åè€Œæ›´ç´¯ã€30æ­²è½‰è·çš„çœŸå¯¦å¿ƒå¾—...';
              case 'package': return 'ä¾‹å¦‚ï¼šæ•™è‚²å•é¡Œã€è·å ´åŠ ç­ã€ç†è²¡è§€å¿µã€è¦ªå­é—œä¿‚ã€è‡ªæˆ‘æˆé•·...';
              case 'url': return 'è¼¸å…¥ä½ æƒ³å‰µä½œçš„ä¸»é¡Œæˆ–é—œéµå­—...';
              default: return '';
            }
          };

          const getButtonText = () => {
            if (loading) return 'ğŸš€ AI æ­£åœ¨æ‰“é€ ä½ çš„çˆ†æ¬¾å…§å®¹...';
            switch(inputMode) {
              case 'package': return 'ç”Ÿæˆçˆ†æ¬¾ç´ æåŒ…';
              default: return 'ç”Ÿæˆçˆ†æ¬¾æ–‡æ¡ˆ';
            }
          };

          return (
            <div className="min-h-screen p-6 md:p-12 flex flex-col items-center">
              {/* Header */}
              <nav className="w-full max-w-5xl flex justify-between items-center mb-12">
                <div className="flex items-center gap-2 font-black text-2xl tracking-tighter">
                  <div className="w-10 h-10 bg-[#FCC800] rounded-xl flex items-center justify-center shadow-lg shadow-amber-200">T</div>
                  <span>Threads<span className="text-amber-500">Maker</span></span>
                </div>
                <div className="bg-white px-5 py-2.5 rounded-2xl border border-amber-100 shadow-sm">
                  <span className="text-[10px] font-black text-amber-600 tracking-widest">PRO ç‰ˆ</span>
                </div>
              </nav>

              <div className="w-full max-w-xl">
                <div className="text-center mb-10">
                  <h1 className="text-4xl md:text-5xl font-black text-[#452a00] mb-4">ä»Šå¤©æƒ³çˆ†ç´…å—ï¼Ÿ</h1>
                  <p className="text-amber-700/50 font-medium">è¼¸å…¥ä½ çš„éˆæ„Ÿï¼Œè®“ AI ç‚ºä½ ç²¾æº–é‰¤å¼•æµé‡</p>
                </div>

                <div className="bg-white rounded-[2.5rem] shadow-xl p-8 border border-amber-50">
                  {/* Mode Toggle - 3 å€‹é¸é … */}
                  <div className="flex gap-2 mb-6 bg-amber-50 p-1.5 rounded-2xl">
                    <button onClick={()=>setInputMode('topic')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='topic'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>âœï¸ ä¸»é¡Œå‰µä½œ</button>
                    <button onClick={()=>setInputMode('package')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='package'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>ğŸ çˆ†æ¬¾ç´ æåŒ…</button>
                    <button onClick={()=>setInputMode('url')} className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${inputMode==='url'?'bg-[#FCC800] shadow-md':'text-amber-500'}`}>ğŸ”— ç¶²é è½‰è­¯</button>
                  </div>

                  {/* Mode Description */}
                  <div className="mb-6 p-4 bg-amber-50/50 rounded-2xl">
                    <p className="text-xs text-amber-600">{getModeDescription()}</p>
                  </div>

                  {/* Length Selector - åªåœ¨ä¸»é¡Œå‰µä½œå’Œç¶²é è½‰è­¯æ¨¡å¼é¡¯ç¤º */}
                  {(inputMode === 'topic' || inputMode === 'url') && (
                    <div className="mb-6">
                      <div className="flex justify-between mb-3 px-1">
                        <label className="text-xs font-black text-[#452a00] uppercase tracking-wider">æ–‡æ¡ˆç¯‡å¹…</label>
                        <span className="text-[10px] font-bold text-amber-400 italic">SEO + æ¼”ç®—æ³•å„ªåŒ–</span>
                      </div>
                      <div className="grid grid-cols-3 gap-2 p-1.5 bg-amber-50 rounded-2xl">
                        {[
                          { key: 'short', label: 'æ¥µçŸ­', desc: '80-120å­—' },
                          { key: 'medium', label: 'æ¨™æº–', desc: '200-300å­—' },
                          { key: 'long', label: 'æ·±åº¦', desc: '400-600å­—' }
                        ].map(l => (
                          <button 
                            key={l.key} 
                            onClick={()=>setLength(l.key)} 
                            className={`py-2 rounded-xl text-xs font-bold transition-all ${length===l.key?'bg-white shadow-sm':'text-amber-400 hover:text-amber-600'}`}
                          >
                            <div>{l.label}</div>
                            <div className="text-[10px] font-normal opacity-60">{l.desc}</div>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}

                  {/* çˆ†æ¬¾ç´ æåŒ…èªªæ˜ */}
                  {inputMode === 'package' && (
                    <div className="mb-6 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-2xl border border-amber-100">
                      <p className="text-xs font-bold text-[#452a00] mb-2">ğŸ“¦ ç´ æåŒ…å…§å®¹ï¼š</p>
                      <div className="grid grid-cols-2 gap-2 text-[11px] text-amber-700">
                        <div>ğŸ”¥ 5 å€‹çˆ†æ¬¾æ¨™é¡Œ</div>
                        <div>ğŸ“ ç²¾ç°¡å…§æ–‡</div>
                        <div>ğŸ’¡ é‡‘å¥</div>
                        <div>ğŸ’¬ 3 å€‹äº’å‹•å‹¾å­</div>
                        <div className="col-span-2">#ï¸âƒ£ Hashtag çµ„åˆ</div>
                      </div>
                    </div>
                  )}

                  {/* Input Area */}
                  <textarea 
                    value={inputText} 
                    onChange={(e)=>setInputText(e.target.value)}
                    placeholder={getPlaceholder()}
                    className="w-full min-h-[120px] p-5 rounded-2xl bg-amber-50/50 border-none focus:ring-2 focus:ring-[#FCC800] text-[#452a00] placeholder-amber-300 mb-6 resize-none"
                  />

                  <button onClick={handleGenerate} disabled={loading} className={`w-full py-4 rounded-2xl font-black text-lg shadow-xl transition-all transform active:scale-95 ${loading ? 'bg-amber-100 text-amber-300' : 'bg-[#FCC800] text-[#452a00] hover:brightness-105 shadow-amber-200'}`}>
                    {getButtonText()}
                  </button>
                  
                  {error && <p className="text-red-500 text-center mt-4 text-sm font-bold">{error}</p>}
                </div>

                {result && <PostCard content={result} onRegenerate={handleGenerate} mode={inputMode} />}
                
                <footer className="mt-16 mb-8 text-center">
                  <div className="text-[10px] text-amber-300 font-bold tracking-widest uppercase mb-1">Powered by Llama 3.3</div>
                  <div className="text-[9px] text-amber-200">Â© 2025 Threads Maker Pro</div>
                  <div className="text-[9px] text-amber-300 mt-2">ğŸ“… {VERSION_DATE} | {VERSION_TEXT}</div>
                </footer>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
